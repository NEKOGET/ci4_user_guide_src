Version 4.4.0
#############

Release Date: Unreleased

**4.4.0 release of CodeIgniter4**

.. contents::
    :local:
    :depth: 3

Highlights
**********

- TBD

BREAKING
********

Behavior Changes
================

URI::setSegment() and Non-Existent Segment
------------------------------------------

An exception is now thrown when you set the last ``+2`` segment.
In previous versions, an exception was thrown only if the last segment ``+3``
or more was specified. See :ref:`upgrade-440-uri-setsegment`.

The next segment (``+1``) of the current last segment can be set as before.

Interface Changes
=================

Method Signature Changes
========================

Enhancements
************

Commands
========

- Now ``spark routes`` command can specify the host in the request URL.
  See :ref:`routing-spark-routes-specify-host`.

Testing
=======

Database
========

Query Builder
-------------

Forge
-----

Others
------

- **MySQLi:** Added the ``numberNative`` attribute to the Database Config to keep the variable type obtained after SQL Query consistent with the type set in the database.
  See :ref:`Database Configuration <database-configuration-explanation-of-values>`.
- **SQLSRV:** Field Metadata now includes ``nullable``. See :ref:`db-metadata-getfielddata`.

Model
=====

- Added special getter/setter to Entity to avoid method name conflicts.
  See :ref:`entities-special-getter-setter`.

Libraries
=========

Helpers and Functions
=====================

Others
======

- **DownloadResponse:** Added ``DownloadResponse::inline()`` method that sets
  the ``Content-Disposition: inline`` header to display the file in the browser.
  See :ref:`open-file-in-browser` for details.
- **View:** Added optional 2nd parameter ``$saveData`` on ``renderSection()`` to prevent from auto cleans the data after displaying. See :ref:`View Layouts <creating-a-layout>` for details.
- **Auto Routing (Improved)**: Now you can use URI without a method name like
  ``product/15`` where ``15`` is an arbitrary number.
  See :ref:`controller-default-method-fallback` for details.
- **Filters:** Now you can use Filter Arguments with :ref:`$filters property <filters-filters-filter-arguments>`.
- **Request:** Added ``IncomingRequest::setValidLocales()`` method to set valid locales.
- **Table:** Added ``Table::setSyncRowsWithHeading()`` method to synchronize row columns with heading. See :ref:`table-sync-rows-with-headings` for details.

Message Changes
***************

- Improved ``HTTP.invalidHTTPProtocol`` error message.

Changes
*******

- **Config:** The deprecated Cookie items in **app/Config/App.php** has been removed.
- **DownloadResponse:** When generating response headers, does not replace the ``Content-Disposition`` header if it was previously specified.
- **Autoloader:** Before v4.4.0, CodeIgniter autoloader did not allow special
  characters that are illegal in filenames on certain operating systems.
  The symbols that can be used are ``/``, ``_``, ``.``, ``:``, ``\`` and space.
  So if you installed CodeIgniter under the folder that contains the special
  characters like ``(``, ``)``, etc., CodeIgniter didn't work. Since v4.4.0,
  this restriction has been removed.

Deprecations
************

- **Entity:** ``Entity::setAttributes()`` is deprecated. Use ``Entity::injectRawData()`` instead.
- **Autoloader:** ``Autoloader::sanitizeFilename()`` is deprecated.

Bugs Fixed
**********

See the repo's
`CHANGELOG.md <https://github.com/codeigniter4/CodeIgniter4/blob/develop/CHANGELOG.md>`_
for a complete list of bugs fixed.
